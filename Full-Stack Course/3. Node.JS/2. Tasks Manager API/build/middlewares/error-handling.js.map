{"version":3,"sources":["../../src/middlewares/error-handling.ts","../../src/utils/app-error.ts"],"sourcesContent":["import { Request, Response, NextFunction } from \"express\";\nimport { ZodError, z } from \"zod\";\n\nimport { AppError } from \"@/utils/app-error\";\n\n\nexport function errorHandling(\n  error: any,\n  request: Request,\n  response: Response,\n  next: NextFunction\n) {\n  if (error instanceof AppError) {\n    return response.status(error.statusCode).json({ message: error.message });\n  }\n\n  if (error instanceof ZodError) {\n    const issues = z.treeifyError(error);\n\n    return response.status(400).json({ message: \"Bad gateway\", issues });\n  }\n\n  return response.status(500).json({ message: \"Something went wrong\" });\n}\n","export class AppError {\n  message: string;\n  statusCode: number;\n\n  constructor(message: string, statusCode: number = 400) {\n    this.message = message;\n    this.statusCode = statusCode;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,iBAA4B;;;ACDrB,IAAM,WAAN,MAAe;AAAA,EACpB;AAAA,EACA;AAAA,EAEA,YAAY,SAAiB,aAAqB,KAAK;AACrD,SAAK,UAAU;AACf,SAAK,aAAa;AAAA,EACpB;AACF;;;ADFO,SAAS,cACd,OACA,SACA,UACA,MACA;AACA,MAAI,iBAAiB,UAAU;AAC7B,WAAO,SAAS,OAAO,MAAM,UAAU,EAAE,KAAK,EAAE,SAAS,MAAM,QAAQ,CAAC;AAAA,EAC1E;AAEA,MAAI,iBAAiB,qBAAU;AAC7B,UAAM,SAAS,aAAE,aAAa,KAAK;AAEnC,WAAO,SAAS,OAAO,GAAG,EAAE,KAAK,EAAE,SAAS,eAAe,OAAO,CAAC;AAAA,EACrE;AAEA,SAAO,SAAS,OAAO,GAAG,EAAE,KAAK,EAAE,SAAS,uBAAuB,CAAC;AACtE;","names":[]}